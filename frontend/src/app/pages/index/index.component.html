<section class="d-flex flex-column h-100">
  <div class="h-75 w-100" *ngIf="postsList.length">
    <tcb-carousel [slides]="postsList"></tcb-carousel>
  </div>
  <section class="px-5 d-flex flex-direction mt-5">
    <section class="d-flex flex-column me-2" *ngIf="postsList.length">
      <div class="mb-3" style="height: auto;"></div>
      <h5 class="post-heading">TRENDING ON THECHOICEBOX</h5>
      <article class="d-flex flex-direction mb-5" *ngFor="let post of postsList | slice: 0:6" style="cursor: pointer;">
        <img class="me-3 align-middle image" [src]="post.image" [alt]="post.title" [routerLink]="['/post', post.id]">
        <div class="d-flex flex-column mt-2">
          <h3 class="fw-bold fs-5" [routerLink]="['/post', post.id]" style="letter-spacing: 1px;">{{ post.title }}
          </h3>
          <p class="title-wrap fs-6" style="letter-spacing: 1px;">{{ post.description }}</p>
          <div class="d-flex flex-row">
            <span class="text-nowrap">{{ post.author }}</span>
            <span class="px-2">·</span>
            <span class="text-nowrap">{{ post.views | numSuffix }} view{{ post.views > 1 ? 's' : '' }}</span>
            <span class="px-2">·</span>
            <span class="text-nowrap">{{ post.createdAt | dateAgo }}</span>
            <span class="px-2">·</span>
            <span class="text-nowarp">{{ post.blog_content.length/265 | number: '1.0-0' }} min read</span>
          </div>
        </div>
      </article>
      <h5 class="post-heading">POPULAR BLOGS</h5>
      <article class="d-flex flex-direction mb-5" *ngFor="let post of postsList | slice: 9" style="cursor: pointer;">
        <img class="me-3 align-middle image" [src]="post.image" [alt]="post.title" [routerLink]="['/post', post.id]">
        <div class="d-flex flex-column mt-2">
          <h3 class="fw-bold fs-5" [routerLink]="['/post', post.id]" style="letter-spacing: 1px;">{{ post.title }}
          </h3>
          <p class="title-wrap fs-6" style="letter-spacing: 1px;">{{ post.description }}</p>
          <div class="d-flex flex-row">
            <span class="text-nowrap">{{ post.author }}</span>
            <span class="px-2">·</span>
            <span class="text-nowrap">{{ post.views | numSuffix }} view{{ post.views > 1 ? 's' : '' }}</span>
            <span class="px-2">·</span>
            <span class="text-nowrap">{{ post.createdAt | dateAgo }}</span>
            <span class="px-2">·</span>
            <span class="text-nowarp">{{ post.blog_content.length/265 | number: '1.0-0' }} min read</span>
          </div>
        </div>
      </article>
    </section>
    <section>
      <div *ngIf="(categoryList$ | async)?.length">
        <h5 class="post-heading">RECOMMENDED CATEGORIES</h5>
        <div class="d-flex flex-row flex-wrap">
          <div class="text-center p-2 me-2 mb-2 chips" [routerLink]="['/category', category.category]"
            *ngFor="let category of categoryList$ | async">
            {{ category.category }}</div>
        </div>
        <hr>
      </div>
      <div *ngIf="postsList.length">
        <article class="d-flex flex-column mb-4" *ngFor="let post of postsList | slice: 6:9"
          style="cursor: pointer;">
          <img class="mb-2 align-middle w-100" [src]="post.image" [alt]="post.title" height="150"
            [routerLink]="['/post', post.id]">
          <h3 class="fw-bold fs-5 m-0" [routerLink]="['/post', post.id]" style="letter-spacing: 1px;">{{ post.title }}
          </h3>
          <div class="d-flex align-items-center">
            <span class="text-nowrap">{{ post.author }}</span>
            <span class="px-2">·</span>
            <span class="text-nowrap">{{ post.category.category }}</span>
            <span class="px-2">·</span>
            <span class="text-nowrap">{{ post.views | numSuffix }} view{{ post.views > 1 ? 's' : '' }}</span>
            <span class="px-2">·</span>
            <span class="text-nowrap">{{ post.createdAt | dateAgo }}</span>
          </div>
        </article>
        <hr>
      </div>
      <div class="d-flex flex-column justify-content-center">
        <img src="assets/img/logo.png" alt="The Choice Box" class="mb-2 mx-auto" width="150" height="134">
        <div class="mx-auto">
          <div class="g-ytsubscribe" data-channelid="UCb2rJ0YO8WaJ0jQvviJn69g" data-layout="default"
            data-count="default">
          </div>
        </div>
      </div>
    </section>
  </section>
</section>
